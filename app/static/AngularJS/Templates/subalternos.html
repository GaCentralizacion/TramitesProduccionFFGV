<link rel="stylesheet" href="css/generic.css">
<link rel="stylesheet" href="css/Transferencias/transferenciasTramite.css">
<link rel="stylesheet" href="css/nuevoTramite/nuevoTramite.css">
<div ng-init="init()">
    <div class="col-md-12" style="height: 100px; background-color: white;">
        <label class="labelDocs">
            <span>
                <img class="imgSubHeader" src="../../img/iconos/gerente@2x.png">
            </span> Captura de subalternos
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="divPrincipal col-md-11">
                <div class="middle-box">
                    <div class="row">
                        <div class="col-sm-3">
                            <label class="labelIdCliente">Empresa:</label>
                            <select class="form-control" ng-model="selEmpresa"
                                ng-options="emp.emp_idempresa as emp.emp_nombre for emp in listaEmpresas"
                                ng-change="getSucuesales(selEmpresa)">
                               <option value="">Seleccione una opción</option>
                           </select>
                        </div>

                        <div class="col-sm-3">
                            <label class="labelIdCliente">Sucursal:</label>
                            <select class="form-control" ng-model="selSucursal"
                                ng-options="suc.idSucursal as suc.nombre for suc in listaSucursales"
                                ng-change="getDepartamentos()" ng-disabled="disabledSuc">
                               <option value="">Seleccione una opción</option>
                           </select>
                        </div>

                        <div class="col-sm-3">
                            <label class="labelIdCliente">Departamento:</label>
                            <select class="form-control" ng-model="selDepartamento"
                                ng-options="dep.idDepartamento as dep.nombre for dep in listaDepartamentos"
                                ng-change="listaUsuarios()" ng-disabled="disableDep">
                               <option value="">Seleccione una opción</option>
                           </select>
                        </div>
                        <div class="col-sm-3" hidden>
                            <label class="labelIdCliente">Tramite:</label>
                            <ul role="listbox" tabindex="0" aria-label="email list">            
                                <li tabindex="-1" role="option" aria-checked="false">
                                    <input tabindex="-1" id="check1" class="o-checkbox" type="checkbox"><label for="check1"></label>
                                    FF y GV
                                </li>
                                <li tabindex="-1" role="option" aria-checked="false">
                                    <input tabindex="-1" id="check1" class="o-checkbox" type="checkbox"><label for="check1"></label>
                                    Anticipos de gastos
                                </li>
                            </ul>
                        </div>

                    </div>
                    <div class="row">
                        <div class="col-sm-4">
                            <label class="labelIdCliente">Selecciona un subalterno:</label>
                            <select class="form-control" ng-model="selSubAlterno"
                                ng-options="sub.id as sub.nombre for sub in listaUsuarios"
                                ng-disabled="disableSubAl">
                               <option value="">Seleccione una opción</option>
                           </select>
                        </div>
                        <div class="col-sm-4">
                            <label class="labelIdCliente">Autoriza:</label>
                            <select class="form-control" ng-model="selAutorizacion"
                                 ng-options="auto.id as auto.nombre for auto in autorizaciones">
                                <option value="">Seleccione una opción</option>
                            </select>
                        </div>
                        <div class="col-sm-4" hidden>
                            <label class="labelIdCliente">Clasificación:</label>
                            <select class="form-control" ng-model="selClasificacion" disabled
                                 ng-options="clas.id as clas.descripcion for clas in clasificacion">
                                <option value="">Seleccione una opción</option>
                            </select>
                        </div>
                        <div class="col-sm-4" style="padding-top: 25px;">
                            <center>
                                <button class="btn btn-primary" ng-click="AgregaBorraSubalternos(1)">Agregar</button>
                            </center>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-5">
                            <label for=""> <strong>NOTA: </strong> Selecciona unicamente a tus subalternos directos</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12" >
                            <table id="subalternos" class="table table-striped table-bordered" cellspacing="0" width="100%">
                                <thead>
                                    <tr>
                                        <th hidden>id</th>
                                        <th> <center> Subalterno directo </center> </th>
                                        <th hidden>Clasificación</th>
                                        <th hidden>id empresa</th>
                                        <th> <center> Nombre empresa </center> </th>
                                        <th hidden>id sucursal</th>
                                        <th> <center> Nombre Sucursal </center> </th>
                                        <th hidden>id depto</th>
                                        <th> <center> Nombre Departamento </center> </th>
                                        <th> <center>  Puede Autorizar </center></th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="subal in listaAgregados">
                                        <td hidden>{{subal.idUsuario}}</td>
                                        <td> {{subal.nombre}}</td>
                                        <td hidden> {{nombreClasificacion}} </td>
                                        <td hidden>{{subal.idEmpresa}}</td>
                                        <td>{{subal.nomEmpresa}}</td>
                                        <td hidden>{{subal.idSucursal}}</td>
                                        <td>{{subal.nomSucursal}}</td>
                                        <td hidden>{{subal.idDepartamento}}</td>
                                        <td>{{subal.nomDepartamento}}</td>
                                        <td> <center><input type="checkbox" ng-model="subal.autoriza"  ng-change="checkAutorizador(subal)"> </center> </td>
                                        <td> <button id="Cance" class="btn btn-raised btn-danger shadow-z-2" ng-click="AgregaBorraSubalternos(2, subal.idUsuario, subal.idEmpresa, subal.idSucursal, subal.idDepartamento)">
                                            <i class="fa fa-times" ></i>
                                          </button></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                  
                </div>
            </div>
        </div>
    </div>
</div>